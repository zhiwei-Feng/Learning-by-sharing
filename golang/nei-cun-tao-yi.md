# 内存逃逸

简单来说，局部变量通过堆分配和回收，就叫内存逃逸。\
因为变量在堆上的分配和回收相比栈上的代价都要大得多, 因此内存逃逸会加重gc压力.

几种发生内存逃逸的例子:

1. 向channel发送指针数据. 因为在编译时，不知道channel中的数据会被哪个 goroutine 接收，因此编译器没法知道变量什么时候才会被释放，因此只能放入堆中。
2. 局部变量在函数返回时还被其他地方使用, 比如返回变量的指针或者闭包引用.
3. slice到一定规模后, 会从栈上分配逃逸到堆上进行分配.
4. 使用interface调用方法, 因为运行时才能知道具体方法调用, 因此表示该interface的变量分配在堆上
