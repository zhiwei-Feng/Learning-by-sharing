# SQL执行过程

SQL执行的过程需要经历从服务层到引擎层两个部分的内容

## 1. 服务层

1. 连接器: SQL要执行, 客户端首先需要连接到MySQL, 连接器就是用来管理该连接的
2. 查询缓存, 命中则返回
3. 分析器: 首先进行词法分析其中有哪些部分(如表名, 列名), 然后进行语法分析判断SQL是否是合法的SQL
4. 优化器: 优化器是在表里面有多个索引的时候，决定使用哪个索引；或者在一个语句有多表关联（join）的时候，决定各个表的连接顺序. 即生成对应的执行计划.

## 2. 引擎层

这里基于update/insert/delete等会修改数据的SQL进行描述

1. 写undo log
2. 判断是否在缓存池中
3. 没在缓存池则需要先通过索引找到对应的数据页,将其读取到缓存池中
4. 更新数据页, 如果是唯一索引还需要判断是否违反唯一约束
5. 写redo log
6. 写binlog
7. 修改redo log状态为commit
